<% include ../header %>
<div class="container" data-ng-controller="stateMachine">

	<div class="alert alert-info" data-ng-show="progressAlert.show">
		<div class="row">
			<div class="col-md-2">
				<img src="img/spinner-large.gif"/>
			</div>
			<div class="col-md-10">
				<br/>
				<br/>
				<div class="progress progress-striped active" data-ng-show="progressAlert.percent > 0">
					<div class="progress-bar" style="width: {{progressAlert.percent}}%"></div>
				</div>
				{{progressAlert.text}}
			</div>
		</div>
	</div>

	<div class="alert alert-danger" data-ng-show="errorAlert.show">
		{{errorAlert.text}}
	</div>

	<div class="alert alert-success" data-ng-show="successAlert.show">
		<div class="row">
			<div class="col-md-2">
				<img src="img/hexapus_sir.png"/>
			</div>
			<div class="col-md-10">
				<br/>
				<br/>
				<br/>
				<span data-localize="wizard.state-machine.upload-success">Upload sucessfull !</span>
			</div>
		</div>
	</div>

	<div>
		<h3>Statemachines</h3>
		<table class="table table-hover">
			<tr data-ng-repeat="machine in devicetree.statemachines">
				<th>
					<i>{{machine.name}}</i><br/>
					{{machine.machineClass}}<br/>
				</th>
				<td>
					<p class="comment-pre">{{machine.comment}}</p>
					<p data-ng-repeat="device in getUsedDevices(machine)">{{device.name}} <i>({{device.ip}})</i></p>
				</td>
				<td>
				</td>
			</tr>
		</table>
	</div>


	<div class="well">
		<h3 data-localize="wizard.state-machine.new">New state machine</h3>
		<div class="form-group">
			<label class="control-label" data-localize="wizard.state-machine.choose">Choose a ... from below.</label>
			<select class="form-control" data-ng-model="machineClass" data-ng-disabled="busy" data-ng-change="changeClass()">
				<option value="Threshold">Threshold</option>
				<option value="MasterSlave">Master/Slave</option>
				<option value="Standbykiller">Standbykiller</option>
				<option value="ProductionThreshold">Production Treshold</option>
			</select>
		</div>
	</div>


	<div data-ng-show="machineClass" class="well">
		<form role="form" name="machineForm" data-sf-schema="schema" data-sf-form="form" data-sf-model="model" data-ng-submit="submit()">
		</form>
	</div>

</div>

<% include ../footer %>
